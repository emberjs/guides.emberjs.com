<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>Ember.js - Testing: Testing Routes</title>
    <meta property="st:title" content="Testing: Testing Routes" />
    <link href="../../images/favicon.png" rel="icon" type="image/png" />
    <!--[if lte IE 7 ]><link href="../../stylesheets/fonts/fontello-ie7.css" rel="stylesheet" type="text/css" /><![endif]-->
    <link href="../../stylesheets/site.css" rel="stylesheet" type="text/css" />
    <link href="/blog/feed.xml" rel="alternate" type="application/atom+xml" title="Ember.js - Blog" />
    
  </head>

  <body class="guides testing testing_testing-routes testing_testing-routes_index">

    <!--[if lt IE 9]>
      <script src="../../javascripts/common-old-ie.js" type="text/javascript"></script>
    <![endif]-->
    <!--[if gte IE 9]><!-->
      <script src="../../javascripts/common-modern.js" type="text/javascript"></script>
    <!--<![endif]-->

    <div id="header">
      <div id="wrapper">
        <a id="logo" href="http://emberjs.com/">&nbsp;</a>
        <ul id="nav">
          <li>
            <a href="http://emberjs.com/">about</a>
          </li>
          <li class="active">
            <a href="/">guides</a>
          </li>
          <li>
            <a href="http://emberjs.com/api">api</a>
          </li>
          <li>
            <a href="http://emberjs.com/community">community</a>
          </li>
          <li>
            <a href="http://emberjs.com/blog">blog</a>
          </li>
          <li>
            <a href="http://emberjs.com/builds">builds</a>
          </li>

          <li id="search">
            <form>
              <input type="text" id="st-search-input" class="st-search-input" placeholder="Search the guides"/>
            </form>
            <div id="st-results-container"></div>
          </li>
        </ul>

        <div id="github">
          <a href="https://github.com/emberjs/ember.js"><i class="icon-fork"></i>Fork Us!</a>
        </div>
      </div>
    </div>

    

    <div id="content-wrapper">
      <div id="sidebar-wrapper">
        <select class="version-select" style="width: 100%"></select>
        <div id="sidebar">

          <ol class='toc-level-0 selected'><li class='toc-level-0 '><a href="#">Getting Started</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../getting-started/">Installing Ember</a></li><li class='toc-level-1 '><a href="../../getting-started/core-concepts/">Core Concepts</a></li><li class='toc-level-1 '><a href="../../getting-started/naming-conventions/">Naming Conventions</a></li></ol></li><li class='toc-level-0 '><a href="#">The Object Model</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../object-model/classes-and-instances/">Classes and Instances</a></li><li class='toc-level-1 '><a href="../../object-model/reopening-classes-and-instances/">Reopening Classes and Instances</a></li><li class='toc-level-1 '><a href="../../object-model/computed-properties/">Computed Properties</a></li><li class='toc-level-1 '><a href="../../object-model/computed-properties-and-aggregate-data/">Computed Properties and Aggregate Data with @each</a></li><li class='toc-level-1 '><a href="../../object-model/observers/">Observers</a></li><li class='toc-level-1 '><a href="../../object-model/bindings/">Bindings</a></li><li class='toc-level-1 '><a href="../../object-model/what-do-i-use-when/">Bindings, Observers, Computed Properties: What Do I Use When?</a></li><li class='toc-level-1 '><a href="../../object-model/enumerables/">Enumerables</a></li></ol></li><li class='toc-level-0 '><a href="#">Templates</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../templates/handlebars-basics/">Handlebars Basics</a></li><li class='toc-level-1 '><a href="../../templates/the-application-template/">The Application Template</a></li><li class='toc-level-1 '><a href="../../templates/conditionals/">Conditionals</a></li><li class='toc-level-1 '><a href="../../templates/displaying-a-list-of-items/">Displaying a List of Items</a></li><li class='toc-level-1 '><a href="../../templates/binding-element-attributes/">Binding Element Attributes</a></li><li class='toc-level-1 '><a href="../../templates/binding-element-class-names/">Binding Element Class Names</a></li><li class='toc-level-1 '><a href="../../templates/links/">Links</a></li><li class='toc-level-1 '><a href="../../templates/actions/">Actions</a></li><li class='toc-level-1 '><a href="../../templates/input-helpers/">Input Helpers</a></li><li class='toc-level-1 '><a href="../../templates/development-helpers/">Development Helpers</a></li><li class='toc-level-1 '><a href="../../templates/rendering-with-helpers/">Rendering with Helpers</a></li><li class='toc-level-1 '><a href="../../templates/writing-helpers/">Writing Helpers</a></li></ol></li><li class='toc-level-0 '><a href="#">Routing</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../routing/">Introduction</a></li><li class='toc-level-1 '><a href="../../routing/defining-your-routes/">Defining Your Routes</a></li><li class='toc-level-1 '><a href="../../routing/generated-objects/">Generated Objects</a></li><li class='toc-level-1 '><a href="../../routing/specifying-a-routes-model/">Specifying a Route's Model</a></li><li class='toc-level-1 '><a href="../../routing/setting-up-a-controller/">Setting Up a Controller</a></li><li class='toc-level-1 '><a href="../../routing/rendering-a-template/">Rendering a Template</a></li><li class='toc-level-1 '><a href="../../routing/redirection/">Redirecting</a></li><li class='toc-level-1 '><a href="../../routing/specifying-the-location-api/">Specifying the URL Type</a></li><li class='toc-level-1 '><a href="../../routing/query-params/">Query Parameters</a></li><li class='toc-level-1 '><a href="../../routing/asynchronous-routing/">Asynchronous Routing</a></li><li class='toc-level-1 '><a href="../../routing/loading-and-error-substates/">Loading / Error Substates</a></li><li class='toc-level-1 '><a href="../../routing/preventing-and-retrying-transitions/">Preventing and Retrying Transitions</a></li></ol></li><li class='toc-level-0 '><a href="#">Components</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../components/">Introduction</a></li><li class='toc-level-1 '><a href="../../components/defining-a-component/">Defining a Component</a></li><li class='toc-level-1 '><a href="../../components/passing-properties-to-a-component/">Passing Properties to a Component</a></li><li class='toc-level-1 '><a href="../../components/wrapping-content-in-a-component/">Wrapping Content in a Component</a></li><li class='toc-level-1 '><a href="../../components/customizing-a-components-element/">Customizing a Component's Element</a></li><li class='toc-level-1 '><a href="../../components/handling-user-interaction-with-actions/">Handling User Interaction with Actions</a></li><li class='toc-level-1 '><a href="../../components/sending-actions-from-components-to-your-application/">Sending Actions from Components to Your Application</a></li><li class='toc-level-1 '><a href="../../components/composing-components/">Composing Components</a></li></ol></li><li class='toc-level-0 '><a href="#">Controllers</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../controllers/">Introduction</a></li><li class='toc-level-1 '><a href="../../controllers/representing-multiple-models/">Representing Multiple Models</a></li><li class='toc-level-1 '><a href="../../controllers/dependencies-between-controllers/">Managing Dependencies Between Controllers</a></li></ol></li><li class='toc-level-0 '><a href="#">Models</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../models/">Introduction</a></li><li class='toc-level-1 '><a href="../../models/defining-models/">Defining Models</a></li><li class='toc-level-1 '><a href="../../models/creating-and-deleting-records/">Creating and Deleting Records</a></li><li class='toc-level-1 '><a href="../../models/pushing-records-into-the-store/">Pushing Records into the Store</a></li><li class='toc-level-1 '><a href="../../models/persisting-records/">Persisting Records</a></li><li class='toc-level-1 '><a href="../../models/finding-records/">Finding Records</a></li><li class='toc-level-1 '><a href="../../models/working-with-records/">Working with Records</a></li><li class='toc-level-1 '><a href="../../models/the-rest-adapter/">The Rest Adapter</a></li><li class='toc-level-1 '><a href="../../models/connecting-to-an-http-server/">Connecting to an HTTP Server</a></li><li class='toc-level-1 '><a href="../../models/handling-metadata/">Handling Metadata</a></li><li class='toc-level-1 '><a href="../../models/customizing-adapters/">Customizing Adapters</a></li><li class='toc-level-1 '><a href="../../models/frequently-asked-questions/">Frequently Asked Questions</a></li></ol></li><li class='toc-level-0 selected'><a href="#">Testing</a><ol class='toc-level-1 selected'><li class='toc-level-1 '><a href="../">Introduction</a></li><li class='toc-level-1 '><a href="../acceptance/">Acceptance Tests</a></li><li class='toc-level-1 '><a href="../test-helpers/">Test Helpers</a></li><li class='toc-level-1 '><a href="../testing-user-interaction/">Testing User Interaction</a></li><li class='toc-level-1 '><a href="../unit-testing-basics/">Unit Testing Basics</a></li><li class='toc-level-1 '><a href="../unit-test-helpers/">Unit Test Helpers</a></li><li class='toc-level-1 '><a href="../testing-components/">Testing Components</a></li><li class='toc-level-1 '><a href="../testing-controllers/">Testing Controllers</a></li><li class='toc-level-1 selected'><a href="./">Testing Routes</a></li><li class='toc-level-1 '><a href="../testing-models/">Testing Models</a></li></ol></li><li class='toc-level-0 '><a href="#">Ember Inspector</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../ember-inspector/installation/">Installing the Inspector</a></li><li class='toc-level-1 '><a href="../../ember-inspector/object-inspector/">Object Inspector</a></li><li class='toc-level-1 '><a href="../../ember-inspector/view-tree/">The View Tree</a></li><li class='toc-level-1 '><a href="../../ember-inspector/routes/">Inspecting Routes</a></li><li class='toc-level-1 '><a href="../../ember-inspector/data/">Data Tab</a></li><li class='toc-level-1 '><a href="../../ember-inspector/deprecations/">Tackling Deprecations</a></li><li class='toc-level-1 '><a href="../../ember-inspector/info/">Library Info</a></li><li class='toc-level-1 '><a href="../../ember-inspector/promises/">Debugging Promises</a></li><li class='toc-level-1 '><a href="../../ember-inspector/container/">Inspecting the Container</a></li><li class='toc-level-1 '><a href="../../ember-inspector/render-performance/">Rendering Performance</a></li><li class='toc-level-1 '><a href="../../ember-inspector/troubleshooting/">Troubleshooting</a></li></ol></li><li class='toc-level-0 '><a href="#">Configuring Ember.js</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../configuring-ember/disabling-prototype-extensions/">Disabling Prototype Extensions</a></li><li class='toc-level-1 '><a href="../../configuring-ember/embedding-applications/">Embedding Applications</a></li><li class='toc-level-1 '><a href="../../configuring-ember/feature-flags/">Feature Flags</a></li></ol></li><li class='toc-level-0 '><a href="#">Understanding Ember.js</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../understanding-ember/debugging/">Debugging</a></li><li class='toc-level-1 '><a href="../../understanding-ember/run-loop/">The Run Loop</a></li><li class='toc-level-1 '><a href="../../understanding-ember/dependency-injection-and-service-lookup/">Dependency Injection & Service Lookup</a></li></ol></li><li class='toc-level-0 '><a href="#">Contributing to Ember.js</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../contributing/adding-new-features/">Adding New Features</a></li><li class='toc-level-1 '><a href="../../contributing/repositories/">Repositories</a></li></ol></li></ol>
          <div id="back-to-top"><a id="back-top-top" href="#">&#11014; Back to Top</a></div>
        </div>
      </div>
      <div id="content" class="has-sidebar">
        <div class="chapter">
          <h1>
            Testing Routes
            <a href="https://github.com/emberjs/guides/edit/master/source/testing/testing-routes.md"
               target="_blank" class="edit-page icon-pencil">Edit Page</a>
          </h1>
          <hr>

          <p><em>Unit testing methods and computed properties follows previous patterns shown 
in <a href="../unit-testing-basics">Unit Testing Basics</a> because Ember.Route extends Ember.Object.</em></p>

<p>Testing routes can be done both via acceptance or unit tests. Acceptance tests 
will likely provide better coverage for routes because routes are typically used 
to perform transitions and load data, both of which are tested more easily in 
full context rather than isolation.</p>

<p>That being said, sometimes it is important to unit test your routes. For example, 
let&#39;s say we&#39;d like to have an alert that can be triggered from anywhere within 
our application. The alert function <code>displayAlert</code> should be put into the 
<code>ApplicationRoute</code> because all actions and events bubble up to it from 
sub-routes and controllers.</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/routes/application.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
</pre></td>
  <td class="code"><pre><span class="reserved">export</span> <span class="keyword">default</span> Ember.Route.extend({
  <span class="key">actions</span>: {
    <span class="function">displayAlert</span>: <span class="keyword">function</span>(text) {
      <span class="local-variable">this</span>._displayAlert(text);
    }
  },

  <span class="function">_displayAlert</span>: <span class="keyword">function</span>(text) {
    alert(text);
  }
});
</pre></td>
</tr></table>
</div></div>
<p>This is made possible by using <code>moduleFor</code>.</p>

<p>In this route we&#39;ve <a href="http://en.wikipedia.org/wiki/Separation_of_concerns">separated our concerns</a>:
The action <code>displayAlert</code> contains the code that is called when the action is 
received, and the private function <code>_displayAlert</code> performs the work. While not 
necessarily obvious here because of the small size of the functions, separating 
code into smaller chunks (or &quot;concerns&quot;), allows it to be more readily isolated 
for testing, which in turn allows you to catch bugs more easily.</p>

<p>Here is an example of how to unit test this route:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">tests/unit/routes/application-test.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
<strong>20</strong>
21
22
23
24
25
26
27
</pre></td>
  <td class="code"><pre>let originalAlert;

moduleFor(<span class="string"><span class="delimiter">'</span><span class="content">route:application</span><span class="delimiter">'</span></span>, {
  <span class="function">beforeEach</span>: <span class="keyword">function</span>() {
    originalAlert = window.alert; <span class="comment">// store a reference to window.alert</span>
  },

  <span class="function">afterEach</span>: <span class="keyword">function</span>() {
    window.alert = originalAlert; <span class="comment">// restore window.alert</span>
  }
});

test(<span class="string"><span class="delimiter">'</span><span class="content">Alert is called on displayAlert</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>(assert) {
  assert.expect(<span class="integer">1</span>);

  <span class="comment">// with moduleFor, the subject returns an instance of the route</span>
  <span class="keyword">var</span> route = <span class="local-variable">this</span>.subject();
  <span class="keyword">var</span> expectedText = <span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>;

  <span class="comment">// stub window.alert to perform a qunit test</span>
  window.<span class="function">alert</span> = <span class="keyword">function</span>(text) {
    assert.equal(text, expectedText, <span class="string"><span class="delimiter">'</span><span class="content">expected </span><span class="delimiter">'</span></span> + text + <span class="string"><span class="delimiter">'</span><span class="content"> to be </span><span class="delimiter">'</span></span> + expectedText);
  };

  <span class="comment">// call the _displayAlert function which triggers the qunit test above</span>
  route._displayAlert(expectedText);
});
</pre></td>
</tr></table>
</div></div>


          
      <footer>
        <a class="previous-guide" href="../testing-controllers/"> ← Testing Controllers</a> <a class="next-guide" href="../testing-models/">Testing Models →</a>
      </footer>
      
        </div>
      </div>
    </div>

    <div id="footer">
      <div id="footer-wrapper">
        <div class="info">
          Copyright 2015 <a href="http://tilde.io">Tilde Inc.</a><br>
          <a href="http://emberjs.com/team">Core Team</a> | <a href="http://emberjs.com/sponsors">Sponsors</a> | <a href="http://emberjs.com/legal">Legal</a></br>
          <a href="http://emberjs.com/guidelines">Community Guidelines</a>
        </div>
        <div class="statement">Ember.js is free, open source and always will be.</div>
        <div class="links">
          <a class="twitter" href="http://twitter.com/emberjs">
            <i class="icon-twitter"></i><span>Twitter</span>
          </a>
          <a class="github" href="https://github.com/emberjs/ember.js">
            <i class="icon-github"></i><span>GitHub</span>
          </a>
          <a class="googleplus" href="https://plus.google.com/communities/106387049790387471205">
            <i class="icon-gplus"></i><span>Google+</span>
          </a>
        </div>
      </div>
    </div>

    

    <script src="../../javascripts/guides.js" type="text/javascript"></script>
    <script src="http://static.jsbin.com/js/embed.js"></script>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
      _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
      _gaq.push(['_setAccount', 'UA-27675533-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
