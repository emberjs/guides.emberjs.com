<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>Ember.js - Templates: Writing Helpers</title>
    <meta property="st:title" content="Templates: Writing Helpers" />
    <link href="../../images/favicon.png" rel="icon" type="image/png" />
    <!--[if lte IE 7 ]><link href="../../stylesheets/fonts/fontello-ie7.css" rel="stylesheet" type="text/css" /><![endif]-->
    <link href="../../stylesheets/site.css" rel="stylesheet" type="text/css" />
    <link href="/blog/feed.xml" rel="alternate" type="application/atom+xml" title="Ember.js - Blog" />
    
  </head>

  <body class="guides templates templates_writing-helpers templates_writing-helpers_index">

    <!--[if lt IE 9]>
      <script src="../../javascripts/common-old-ie.js" type="text/javascript"></script>
    <![endif]-->
    <!--[if gte IE 9]><!-->
      <script src="../../javascripts/common-modern.js" type="text/javascript"></script>
    <!--<![endif]-->

    <div id="header">
      <div id="wrapper">
        <a id="logo" href="http://emberjs.com/">&nbsp;</a>
        <ul id="nav">
          <li>
            <a href="http://emberjs.com/">about</a>
          </li>
          <li class="active">
            <a href="/">guides</a>
          </li>
          <li>
            <a href="http://emberjs.com/api">api</a>
          </li>
          <li>
            <a href="http://emberjs.com/community">community</a>
          </li>
          <li>
            <a href="http://emberjs.com/blog">blog</a>
          </li>
          <li>
            <a href="http://emberjs.com/builds">builds</a>
          </li>

          <li id="search">
            <form>
              <input type="text" id="st-search-input" class="st-search-input" placeholder="Search the guides"/>
            </form>
            <div id="st-results-container"></div>
          </li>
        </ul>

        <div id="github">
          <a href="https://github.com/emberjs/ember.js"><i class="icon-fork"></i>Fork Us!</a>
        </div>
      </div>
    </div>

    

    <div id="content-wrapper">
      <div id="sidebar-wrapper">
        <select class="version-select" style="width: 100%"></select>
        <div id="sidebar">

          <ol class='toc-level-0 selected'><li class='toc-level-0 '><a href="#">Getting Started</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../getting-started/">Installing Ember</a></li><li class='toc-level-1 '><a href="../../getting-started/core-concepts/">Core Concepts</a></li><li class='toc-level-1 '><a href="../../getting-started/naming-conventions/">Naming Conventions</a></li></ol></li><li class='toc-level-0 '><a href="#">The Object Model</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../object-model/classes-and-instances/">Classes and Instances</a></li><li class='toc-level-1 '><a href="../../object-model/reopening-classes-and-instances/">Reopening Classes and Instances</a></li><li class='toc-level-1 '><a href="../../object-model/computed-properties/">Computed Properties</a></li><li class='toc-level-1 '><a href="../../object-model/computed-properties-and-aggregate-data/">Computed Properties and Aggregate Data with @each</a></li><li class='toc-level-1 '><a href="../../object-model/observers/">Observers</a></li><li class='toc-level-1 '><a href="../../object-model/bindings/">Bindings</a></li><li class='toc-level-1 '><a href="../../object-model/what-do-i-use-when/">Bindings, Observers, Computed Properties: What Do I Use When?</a></li><li class='toc-level-1 '><a href="../../object-model/enumerables/">Enumerables</a></li></ol></li><li class='toc-level-0 selected'><a href="#">Templates</a><ol class='toc-level-1 selected'><li class='toc-level-1 '><a href="../handlebars-basics/">Handlebars Basics</a></li><li class='toc-level-1 '><a href="../the-application-template/">The Application Template</a></li><li class='toc-level-1 '><a href="../conditionals/">Conditionals</a></li><li class='toc-level-1 '><a href="../displaying-a-list-of-items/">Displaying a List of Items</a></li><li class='toc-level-1 '><a href="../binding-element-attributes/">Binding Element Attributes</a></li><li class='toc-level-1 '><a href="../binding-element-class-names/">Binding Element Class Names</a></li><li class='toc-level-1 '><a href="../links/">Links</a></li><li class='toc-level-1 '><a href="../actions/">Actions</a></li><li class='toc-level-1 '><a href="../input-helpers/">Input Helpers</a></li><li class='toc-level-1 '><a href="../development-helpers/">Development Helpers</a></li><li class='toc-level-1 '><a href="../rendering-with-helpers/">Rendering with Helpers</a></li><li class='toc-level-1 selected'><a href="./">Writing Helpers</a></li></ol></li><li class='toc-level-0 '><a href="#">Routing</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../routing/">Introduction</a></li><li class='toc-level-1 '><a href="../../routing/defining-your-routes/">Defining Your Routes</a></li><li class='toc-level-1 '><a href="../../routing/generated-objects/">Generated Objects</a></li><li class='toc-level-1 '><a href="../../routing/specifying-a-routes-model/">Specifying a Route's Model</a></li><li class='toc-level-1 '><a href="../../routing/setting-up-a-controller/">Setting Up a Controller</a></li><li class='toc-level-1 '><a href="../../routing/rendering-a-template/">Rendering a Template</a></li><li class='toc-level-1 '><a href="../../routing/redirection/">Redirecting</a></li><li class='toc-level-1 '><a href="../../routing/specifying-the-location-api/">Specifying the URL Type</a></li><li class='toc-level-1 '><a href="../../routing/query-params/">Query Parameters</a></li><li class='toc-level-1 '><a href="../../routing/asynchronous-routing/">Asynchronous Routing</a></li><li class='toc-level-1 '><a href="../../routing/loading-and-error-substates/">Loading / Error Substates</a></li><li class='toc-level-1 '><a href="../../routing/preventing-and-retrying-transitions/">Preventing and Retrying Transitions</a></li></ol></li><li class='toc-level-0 '><a href="#">Components</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../components/">Introduction</a></li><li class='toc-level-1 '><a href="../../components/defining-a-component/">Defining a Component</a></li><li class='toc-level-1 '><a href="../../components/passing-properties-to-a-component/">Passing Properties to a Component</a></li><li class='toc-level-1 '><a href="../../components/wrapping-content-in-a-component/">Wrapping Content in a Component</a></li><li class='toc-level-1 '><a href="../../components/customizing-a-components-element/">Customizing a Component's Element</a></li><li class='toc-level-1 '><a href="../../components/handling-user-interaction-with-actions/">Handling User Interaction with Actions</a></li><li class='toc-level-1 '><a href="../../components/sending-actions-from-components-to-your-application/">Sending Actions from Components to Your Application</a></li><li class='toc-level-1 '><a href="../../components/composing-components/">Composing Components</a></li></ol></li><li class='toc-level-0 '><a href="#">Controllers</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../controllers/">Introduction</a></li><li class='toc-level-1 '><a href="../../controllers/representing-multiple-models/">Representing Multiple Models</a></li><li class='toc-level-1 '><a href="../../controllers/dependencies-between-controllers/">Managing Dependencies Between Controllers</a></li></ol></li><li class='toc-level-0 '><a href="#">Models</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../models/">Introduction</a></li><li class='toc-level-1 '><a href="../../models/defining-models/">Defining Models</a></li><li class='toc-level-1 '><a href="../../models/creating-and-deleting-records/">Creating and Deleting Records</a></li><li class='toc-level-1 '><a href="../../models/pushing-records-into-the-store/">Pushing Records into the Store</a></li><li class='toc-level-1 '><a href="../../models/persisting-records/">Persisting Records</a></li><li class='toc-level-1 '><a href="../../models/finding-records/">Finding Records</a></li><li class='toc-level-1 '><a href="../../models/working-with-records/">Working with Records</a></li><li class='toc-level-1 '><a href="../../models/the-rest-adapter/">The Rest Adapter</a></li><li class='toc-level-1 '><a href="../../models/connecting-to-an-http-server/">Connecting to an HTTP Server</a></li><li class='toc-level-1 '><a href="../../models/handling-metadata/">Handling Metadata</a></li><li class='toc-level-1 '><a href="../../models/customizing-adapters/">Customizing Adapters</a></li><li class='toc-level-1 '><a href="../../models/frequently-asked-questions/">Frequently Asked Questions</a></li></ol></li><li class='toc-level-0 '><a href="#">Testing</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../testing/">Introduction</a></li><li class='toc-level-1 '><a href="../../testing/acceptance/">Acceptance Tests</a></li><li class='toc-level-1 '><a href="../../testing/test-helpers/">Test Helpers</a></li><li class='toc-level-1 '><a href="../../testing/testing-user-interaction/">Testing User Interaction</a></li><li class='toc-level-1 '><a href="../../testing/unit-testing-basics/">Unit Testing Basics</a></li><li class='toc-level-1 '><a href="../../testing/unit-test-helpers/">Unit Test Helpers</a></li><li class='toc-level-1 '><a href="../../testing/testing-components/">Testing Components</a></li><li class='toc-level-1 '><a href="../../testing/testing-controllers/">Testing Controllers</a></li><li class='toc-level-1 '><a href="../../testing/testing-routes/">Testing Routes</a></li><li class='toc-level-1 '><a href="../../testing/testing-models/">Testing Models</a></li></ol></li><li class='toc-level-0 '><a href="#">Ember Inspector</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../ember-inspector/installation/">Installing the Inspector</a></li><li class='toc-level-1 '><a href="../../ember-inspector/object-inspector/">Object Inspector</a></li><li class='toc-level-1 '><a href="../../ember-inspector/view-tree/">The View Tree</a></li><li class='toc-level-1 '><a href="../../ember-inspector/routes/">Inspecting Routes</a></li><li class='toc-level-1 '><a href="../../ember-inspector/data/">Data Tab</a></li><li class='toc-level-1 '><a href="../../ember-inspector/deprecations/">Tackling Deprecations</a></li><li class='toc-level-1 '><a href="../../ember-inspector/info/">Library Info</a></li><li class='toc-level-1 '><a href="../../ember-inspector/promises/">Debugging Promises</a></li><li class='toc-level-1 '><a href="../../ember-inspector/container/">Inspecting the Container</a></li><li class='toc-level-1 '><a href="../../ember-inspector/render-performance/">Rendering Performance</a></li><li class='toc-level-1 '><a href="../../ember-inspector/troubleshooting/">Troubleshooting</a></li></ol></li><li class='toc-level-0 '><a href="#">Configuring Ember.js</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../configuring-ember/disabling-prototype-extensions/">Disabling Prototype Extensions</a></li><li class='toc-level-1 '><a href="../../configuring-ember/embedding-applications/">Embedding Applications</a></li><li class='toc-level-1 '><a href="../../configuring-ember/feature-flags/">Feature Flags</a></li></ol></li><li class='toc-level-0 '><a href="#">Understanding Ember.js</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../understanding-ember/debugging/">Debugging</a></li><li class='toc-level-1 '><a href="../../understanding-ember/run-loop/">The Run Loop</a></li><li class='toc-level-1 '><a href="../../understanding-ember/dependency-injection-and-service-lookup/">Dependency Injection & Service Lookup</a></li></ol></li><li class='toc-level-0 '><a href="#">Contributing to Ember.js</a><ol class='toc-level-1'><li class='toc-level-1 '><a href="../../contributing/adding-new-features/">Adding New Features</a></li><li class='toc-level-1 '><a href="../../contributing/repositories/">Repositories</a></li></ol></li></ol>
          <div id="back-to-top"><a id="back-top-top" href="#">&#11014; Back to Top</a></div>
        </div>
      </div>
      <div id="content" class="has-sidebar">
        <div class="chapter">
          <h1>
            Writing Helpers
            <a href="https://github.com/emberjs/guides/edit/master/source/templates/writing-helpers.md"
               target="_blank" class="edit-page icon-pencil">Edit Page</a>
          </h1>
          <hr>

          <p>Helpers allow you to add additional functionality to your
templates beyond what is included out-of-the-box in Ember. Helpers are
most useful for transforming raw values from models and components into
a format more appropriate for your users.</p>

<p>For example, imagine we have an <code>Invoice</code> model that contains a
<code>totalDue</code> attribute, which represents the total amount due for that
invoice.  Because we do not want our company to go out of business due
to strange JavaScript rounding errors, <a href="http://stackoverflow.com/a/3730040">we store this value in cents
instead of a floating point dollar value</a>.</p>

<p>However, if we display dollar values to our users as &quot;100¢&quot; instead of
&quot;$1.00&quot;, they may be very confused. We can write a helper to
format these values into the appropriate human-readable form.</p>

<p>Let&#39;s create a <code>format-currency</code> helper that takes an integer count of
cents and turns it into formatted dollars.</p>

<p>To use the <code>format-currency</code> helper, you call it using curly braces in
your template:</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>Your total is <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">format-currency</span> <span class="attribute-name">model.totalDue</span><span class="inline-delimiter">}}</span></span>.
</pre></td>
</tr></table>
</div></div>
<p>Let&#39;s now implement the helper. Helpers are just functions that take
one or more inputs and return a single output that should be put into
the HTML.</p>

<p>To add a new helper, create a file with the name of the helper you want
(e.g. <code>format-currency.js</code>) in your application&#39;s <code>helpers</code> directory.
You can also have Ember generate the file for you from the command line:</p>
<div class="highlight shell "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>ember generate helper format-currency
</pre></td>
</tr></table>
</div></div>
<p>That file should export a function wrapped with <code>Ember.Helper.helper()</code>:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/helpers/format-currency.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Ember from <span class="string"><span class="delimiter">&quot;</span><span class="content">ember</span><span class="delimiter">&quot;</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> Ember.Helper.helper(<span class="keyword">function</span>(params) {
  let value = params[<span class="integer">0</span>],
      dollars = Math.floor(value / <span class="integer">100</span>),
      cents = value % <span class="integer">100</span>,
      sign = <span class="string"><span class="delimiter">'</span><span class="content">$</span><span class="delimiter">'</span></span>;

  <span class="keyword">if</span> (cents.toString().length === <span class="integer">1</span>) { cents = <span class="string"><span class="delimiter">'</span><span class="content">0</span><span class="delimiter">'</span></span> + cents; }
  <span class="keyword">return</span> <span class="error">`</span><span class="predefined">$</span>{sign}<span class="predefined">$</span>{dollars}.<span class="predefined">$</span>{cents}<span class="error">`</span>;
});
</pre></td>
</tr></table>
</div></div>
<p>In this example, the function receives a dollar amount in cents as the first
parameter (<code>params[0]</code>). We then use regular JavaScript to turn the
count of cents into a formatted string, like <code>&quot;$5.00&quot;</code>.</p>

<p>Whenever you use your helper in a template, Ember will call this
function and insert whatever you return from the helper into the DOM.</p>

<p>So, for example, if we had a template like this where we pass a value in
cents:</p>
<div class="highlight hbs "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>Your total is {{format-currency 250}}.
</pre></td>
</tr></table>
</div></div>
<p>Ember would replace the content inside the <code>{{ }}</code> with the formatted
amount:</p>
<div class="highlight hbs "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>Your total is $2.50.
</pre></td>
</tr></table>
</div></div>
<p>Whenever the arguments you&#39;ve passed to a helper change, whether they
come from a model or a component, Ember will automatically call your
helper again with the new values and keep the DOM up-to-date.</p>
<h3 class='anchorable-toc' id='toc_helper-names'>Helper Names</h3>
<p>Unlike components, helpers do not require a dash (<code>-</code>) character in
their name.</p>
<h3 class='anchorable-toc' id='toc_helper-arguments'>Helper Arguments</h3>
<p>You can pass one or more arguments to  which can be used
inside the function. In the above example, we passed the amount in cents
as the first and only argument.</p>

<p>To pass multiple arguments to a helper, add them as a space-separated
list after the helper name:</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">my-helper</span> <span class="error">&quot;</span><span class="attribute-name">hello</span><span class="error">&quot;</span> <span class="error">&quot;</span><span class="attribute-name">world</span><span class="error">&quot;</span><span class="inline-delimiter">}}</span></span>
</pre></td>
</tr></table>
</div></div>
<p>An array of these arguments is passed to the helper function:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/helpers/my-helper.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Ember from <span class="string"><span class="delimiter">&quot;</span><span class="content">ember</span><span class="delimiter">&quot;</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> Ember.Helper.helper(<span class="keyword">function</span>(params) {
  let arg1 = params[<span class="integer">0</span>];
  let arg2 = params[<span class="integer">1</span>];

  console.log(arg1); <span class="comment">// =&gt; &quot;hello&quot;</span>
  console.log(arg2); <span class="comment">// =&gt; &quot;world&quot;</span>
});
</pre></td>
</tr></table>
</div></div>
<p>You can use JavaScript&#39;s destructuring assignment shorthand to clean up
the code. This example is equivalent to the above example (note the function signature):</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/helpers/my-helper.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Ember from <span class="string"><span class="delimiter">&quot;</span><span class="content">ember</span><span class="delimiter">&quot;</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> Ember.Helper.helper(<span class="keyword">function</span>([arg1, arg2]) {
  console.log(arg1); <span class="comment">// =&gt; &quot;hello&quot;</span>
  console.log(arg2); <span class="comment">// =&gt; &quot;world&quot;</span>
});
</pre></td>
</tr></table>
</div></div><h3 class='anchorable-toc' id='toc_named-arguments'>Named Arguments</h3>
<p>Normal arguments are useful for passing data to be transformed into
helper functions. However, because the order in which you pass arguments
matters, it is usually best not to have helpers take more than one or
two of them.</p>

<p>That said, sometimes you may want to make behavior of helpers
configurable by the developers that call them from their templates. For
example, let&#39;s abandon our American-centric ways and update our
<code>format-currency</code> helper to take an optional configuration for which
currency symbol to display.</p>

<p>Helpers allow you to pass named arguments as a JavaScript
object that contains the name of the argument along with an associated
value.  The order in which named arguments are supplied does not affect
functionality.</p>

<p>In this example, we can pass a <code>sign</code> argument to our <code>format-currency</code>
helper:</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">format-currency</span> <span class="attribute-name">350</span> <span class="attribute-name">sign</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">£</span><span class="delimiter">&quot;</span></span><span class="inline-delimiter">}}</span></span>
</pre></td>
</tr></table>
</div></div>
<p>We&#39;d like our helper to print pounds sterling rather than US dollars:</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>£3.50
</pre></td>
</tr></table>
</div></div>
<p>The object containing named arguments is passed as the second argument
to the helper function.  Here is our example from above, updated to
support the optional <code>sign</code> option:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/helpers/format-currency.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Ember from <span class="string"><span class="delimiter">&quot;</span><span class="content">ember</span><span class="delimiter">&quot;</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> Ember.Helper.helper(<span class="keyword">function</span>(params, namedArgs) {
  let value = params[<span class="integer">0</span>],
      dollars = Math.floor(value / <span class="integer">100</span>),
      cents = value % <span class="integer">100</span>,
      sign = namedArgs.sign === <span class="predefined-constant">undefined</span> ? <span class="string"><span class="delimiter">'</span><span class="content">$</span><span class="delimiter">'</span></span> : namedArgs.sign;

  <span class="keyword">if</span> (cents.toString().length === <span class="integer">1</span>) { cents = <span class="string"><span class="delimiter">'</span><span class="content">0</span><span class="delimiter">'</span></span> + cents; }
  <span class="keyword">return</span> <span class="error">`</span><span class="predefined">$</span>{sign}<span class="predefined">$</span>{dollars}.<span class="predefined">$</span>{cents}<span class="error">`</span>;
});
</pre></td>
</tr></table>
</div></div>
<p>You can pass as many named arguments as you&#39;d like. They get added to the
<code>namedArgs</code> argument passed to the function:</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
</pre></td>
  <td class="code"><pre><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">my-helper</span> <span class="attribute-name">option1</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">hello</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">option2</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">world</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">option3</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">goodbye cruel</span>
<span class="content">world</span><span class="delimiter">&quot;</span></span><span class="inline-delimiter">}}</span></span>
</pre></td>
</tr></table>
</div></div><div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/helpers/my-helper.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Ember from <span class="string"><span class="delimiter">&quot;</span><span class="content">ember</span><span class="delimiter">&quot;</span></span>;
<span class="reserved">export</span> <span class="keyword">default</span> Ember.Helper.helper(<span class="keyword">function</span>(params, namedArgs) {
  console.log(namedArgs.option1); <span class="comment">// =&gt; &quot;hello&quot;</span>
  console.log(namedArgs.option2); <span class="comment">// =&gt; &quot;world&quot;</span>
  console.log(namedArgs.option3); <span class="comment">// =&gt; &quot;goodbye cruel world&quot;</span>
});
</pre></td>
</tr></table>
</div></div>
<p>You can use JavaScript&#39;s destructuring assignment shorthand in this case
as well to clean up the above code:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/helpers/my-helper.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Ember from <span class="string"><span class="delimiter">&quot;</span><span class="content">ember</span><span class="delimiter">&quot;</span></span>;
<span class="reserved">export</span> <span class="keyword">default</span> Ember.Helper.helper(<span class="keyword">function</span>(params, { option1, option2, option3 }) {
  console.log(option1); <span class="comment">// =&gt; &quot;hello&quot;</span>
  console.log(option2); <span class="comment">// =&gt; &quot;world&quot;</span>
  console.log(option3); <span class="comment">// =&gt; &quot;goodbye cruel world&quot;</span>
});
</pre></td>
</tr></table>
</div></div>
<p>In sum, arguments are good for passing values:</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">format-date</span> <span class="attribute-name">currentDate</span><span class="inline-delimiter">}}</span></span>
</pre></td>
</tr></table>
</div></div>
<p>Hashes are useful for configuring the behavior of a helper:</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">print-current-date</span> <span class="attribute-name">format</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">YYYY MM DD</span><span class="delimiter">&quot;</span></span><span class="inline-delimiter">}}</span></span>
</pre></td>
</tr></table>
</div></div>
<p>You can have as many of both as you want, so long as the parameters come
first:</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">format-date-and-time</span> <span class="attribute-name">date</span> <span class="attribute-name">time</span> <span class="attribute-name">format</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">YYYY MM DD h:mm</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">locale</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span><span class="inline-delimiter">}}</span></span>
</pre></td>
</tr></table>
</div></div>
<p>The above example contains two arguments:</p>

<ul>
<li><code>date</code></li>
<li><code>time</code></li>
</ul>

<p>And two named arguments:</p>

<ul>
<li><code>format=&quot;YYY MM DD h:mm&quot;</code></li>
<li><code>locale=&quot;en&quot;</code></li>
</ul>
<h3 class='anchorable-toc' id='toc_stateful-helpers'>Stateful Helpers</h3>
<p>By default, helpers are <em>stateless</em>. They are passed inputs (parameters
and a hash), they perform an operation on those inputs, and return a
single output. They have no side-effects and don&#39;t save any information
that is used on subsequent runs of the function.</p>

<p>In some situations, however, you may need to write a helper that
interacts with the rest of your application. You can create stateful
helpers that have access to services in your application, and can
optionally save state as well.</p>

<p>To create a stateful helper, rather than returning a simple function,
you should return a subclass of <code>Ember.Helper</code>. Helper classes must
contain a <code>compute</code> method that behaves the same as the function passed
to <code>Ember.Helper.helper</code>.</p>

<p>In fact, we can refactor the above stateless helper into a stateful
helper just by making the function into a <code>compute</code> method on the class:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/helpers/format-currency.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Ember from <span class="string"><span class="delimiter">&quot;</span><span class="content">ember</span><span class="delimiter">&quot;</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> Ember.Helper.extend({
  compute(params, hash) {
    let value = params[<span class="integer">0</span>],
        dollars = Math.floor(value / <span class="integer">100</span>),
        cents = value % <span class="integer">100</span>,
        sign = hash.sign === <span class="predefined-constant">undefined</span> ? <span class="string"><span class="delimiter">'</span><span class="content">$</span><span class="delimiter">'</span></span> : hash.sign;

    <span class="keyword">if</span> (cents.toString().length === <span class="integer">1</span>) { cents = <span class="string"><span class="delimiter">'</span><span class="content">0</span><span class="delimiter">'</span></span> + cents; }
    <span class="keyword">return</span> <span class="error">`</span><span class="predefined">$</span>{sign}<span class="predefined">$</span>{dollars}.<span class="predefined">$</span>{cents}<span class="error">`</span>;
  }
});
</pre></td>
</tr></table>
</div></div>
<p>This is exactly equivalent to the example above. You can think of the
function version as a shorthand for the longer class form if it does not
require any state.</p>
<h3 class='anchorable-toc' id='toc_adding-services'>Adding Services</h3>
<p>Stateful helpers can access the services in your application. In order to
access a service, you must first inject it into the stateful helper.
Once added, you can call the service&#39;s methods or access its properties
from within the <code>compute()</code> method.</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/helpers/is-authenticated.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Ember from <span class="string"><span class="delimiter">&quot;</span><span class="content">ember</span><span class="delimiter">&quot;</span></span>;

<span class="reserved">export</span> <span class="keyword">default</span> Ember.Helper.extend({
  <span class="key">authentication</span>: Ember.inject.service()
  compute() {
    let authentication = <span class="local-variable">this</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">authentication</span><span class="delimiter">'</span></span>);

    <span class="keyword">if</span> (authentication.get(<span class="string"><span class="delimiter">'</span><span class="content">isAuthenticated</span><span class="delimiter">'</span></span>)) {
      <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Welcome back, </span><span class="delimiter">&quot;</span></span> + authentication.get(<span class="string"><span class="delimiter">'</span><span class="content">username</span><span class="delimiter">'</span></span>);
    } <span class="keyword">else</span> {
      <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">Not logged in</span><span class="delimiter">&quot;</span></span>;
    }
  }
});
</pre></td>
</tr></table>
</div></div><h3 class='anchorable-toc' id='toc_escaping-html-content'>Escaping HTML Content</h3>
<p>To protect your application from cross-site scripting attacks (XSS),
Ember automatically escapes any value you return from a helper so that
the browser will not interpret it as HTML.</p>

<p>For example, here&#39;s a <code>make-bold</code> helper that returns a string containing HTML:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/helpers/make-bold.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Ember from <span class="string"><span class="delimiter">&quot;</span><span class="content">ember</span><span class="delimiter">&quot;</span></span>;
<span class="reserved">export</span> <span class="keyword">default</span> Ember.Helper.helper(<span class="keyword">function</span>(params) {
  <span class="keyword">return</span> <span class="error">`</span><span class="tag">&lt;b&gt;</span>${params[0]}<span class="tag">&lt;/b&gt;</span><span class="error">`</span>;
});
</pre></td>
</tr></table>
</div></div>
<p>You can invoke it like this:</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre><span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">make-bold</span> <span class="error">&quot;</span><span class="attribute-name">Hello</span> <span class="attribute-name">world</span><span class="error">&quot;</span><span class="inline-delimiter">}}</span></span>
</pre></td>
</tr></table>
</div></div>
<p>Ember will escape the HTML tags, like this:</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre><span class="entity">&amp;lt;</span>b<span class="entity">&amp;gt;</span>Hello world<span class="entity">&amp;lt;</span>/b<span class="entity">&amp;gt;</span>
</pre></td>
</tr></table>
</div></div>
<p>This shows the literal string <code>&lt;b&gt;Hello world&lt;/b&gt;</code> to the user, rather
than the text in bold as you probably intended. We can tell Ember not to
escape the return value (that is, that it is <em>safe</em>) by using the
<code>htmlSafe</code> string utility:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/helpers/make-bold.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Ember from <span class="string"><span class="delimiter">&quot;</span><span class="content">ember</span><span class="delimiter">&quot;</span></span>;
<span class="reserved">export</span> <span class="keyword">default</span> Ember.Helper.helper(<span class="keyword">function</span>(params) {
  <span class="keyword">return</span> Ember.String.htmlSafe(<span class="error">`</span><span class="tag">&lt;b&gt;</span>${params[0]}<span class="tag">&lt;/b&gt;</span><span class="error">`</span>);
});
</pre></td>
</tr></table>
</div></div>
<p>If you return a <code>SafeString</code> (a string that has been wrapped in a call
to <code>htmlSafe</code>), Ember knows that you have vouched on its behalf that it
contains no malicious HTML.</p>

<p>However, note that in the above code we may have just inadvertently
introduced an XSS vulnerability into our application! By blindly marking
the string as safe, a malicious user could get their own HTML into our
app, allowing them to do things like access sensitive customer data.</p>

<p>For example, imagine that we have a chat app  and use our <code>make-bold</code>
helper to welcome the new users into the channel:</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>Welcome back! <span class="inline"><span class="inline-delimiter">{{</span><span class="attribute-name">make-bold</span> <span class="attribute-name">model.firstName</span><span class="inline-delimiter">}}</span></span> has joined the channel.
</pre></td>
</tr></table>
</div></div>
<p>Now a malicious user simply needs to set their <code>firstName</code> to a string
containing HTML (like a <code>&lt;script&gt;</code> tag that sends private customer data
to their server, for example) and every user in that chat room has been
compromised.</p>

<p>In general, you should prefer using components if you are wrapping
content in HTML. However, if you really want to include a mix of HTML
and values from models in what you return from the helper, make sure you
escape anything that may have come from an untrusted user with the
<code>escapeExpression</code> utility:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay">
  <thead>
    <tr>
      <td colspan="2">app/helpers/make-bold.js</td>
    </tr>
  </thead>
<tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> Ember from <span class="string"><span class="delimiter">&quot;</span><span class="content">ember</span><span class="delimiter">&quot;</span></span>;
<span class="reserved">export</span> <span class="keyword">default</span> Ember.Helper.helper(<span class="keyword">function</span>(params) {
  let value = Handlebars.Utils.escapeExpression(params[<span class="integer">0</span>]);
  <span class="keyword">return</span> Ember.String.htmlSafe(<span class="error">`</span><span class="tag">&lt;b&gt;</span>${value}<span class="tag">&lt;/b&gt;</span><span class="error">`</span>);
});
</pre></td>
</tr></table>
</div></div>
<p>Now the value passed into the helper has its HTML escaped, but the trusted
<code>&lt;b&gt;</code> tags that we want to wrap the value in are <em>not</em> escaped. A
malicious user setting their <code>firstName</code> to something containing HTML
would just see this:</p>
<div class="highlight handlebars "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
</pre></td>
  <td class="code"><pre>Welcome back! <span class="tag">&lt;b&gt;</span><span class="entity">&amp;lt;</span>script
type=&quot;javascript&quot;<span class="entity">&amp;gt;</span>alert('pwned!');<span class="entity">&amp;lt;</span>/script<span class="entity">&amp;gt;</span><span class="tag">&lt;/b&gt;</span> has joined the channel.
</pre></td>
</tr></table>
</div></div>


          
      <footer>
        <a class="previous-guide" href="../rendering-with-helpers/"> ← Rendering with Helpers</a> <a class="next-guide" href="../../routing/">We're done with Templates. Next up: Routing - Introduction →</a>
      </footer>
      
        </div>
      </div>
    </div>

    <div id="footer">
      <div id="footer-wrapper">
        <div class="info">
          Copyright 2015 <a href="http://tilde.io">Tilde Inc.</a><br>
          <a href="http://emberjs.com/team">Core Team</a> | <a href="http://emberjs.com/sponsors">Sponsors</a> | <a href="http://emberjs.com/legal">Legal</a></br>
          <a href="http://emberjs.com/guidelines">Community Guidelines</a>
        </div>
        <div class="statement">Ember.js is free, open source and always will be.</div>
        <div class="links">
          <a class="twitter" href="http://twitter.com/emberjs">
            <i class="icon-twitter"></i><span>Twitter</span>
          </a>
          <a class="github" href="https://github.com/emberjs/ember.js">
            <i class="icon-github"></i><span>GitHub</span>
          </a>
          <a class="googleplus" href="https://plus.google.com/communities/106387049790387471205">
            <i class="icon-gplus"></i><span>Google+</span>
          </a>
        </div>
      </div>
    </div>

    

    <script src="../../javascripts/guides.js" type="text/javascript"></script>
    <script src="http://static.jsbin.com/js/embed.js"></script>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
      _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
      _gaq.push(['_setAccount', 'UA-27675533-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
